import{_ as b,o as l,c as d,a as e,t as r,F as c,r as v,j as f,w as p,v as u,i as m,k as D,b as g,h,n as y,e as w,p as _,d as M}from"./index-598c9144.js";const a=s=>(_("data-v-0ef07628"),s=s(),M(),s),k={class:"terminverwaltungView"},C=a(()=>e("h2",null,"Todo",-1)),I=a(()=>e("ul",null,[e("li",null,"Dies ist die Admin Oberfläche für den angemeldeten User."),e("li",null,"Beim Klick auf den Termin kann die Dauer festgelegt werden. Im Backend wird der AppointmentState auf Confirmed gesetzt. "),e("li",null,"Der Termin kann auch gelöscht werden (wenn der Patient storniert)")],-1)),V={class:"calendarHeader"},S={class:"headerMonth"},A={class:"kalender"},P=g('<div class="headerCell" data-v-0ef07628>Montag</div><div class="headerCell" data-v-0ef07628>Dienstag</div><div class="headerCell" data-v-0ef07628>Mittwoch</div><div class="headerCell" data-v-0ef07628>Donnerstag</div><div class="headerCell" data-v-0ef07628>Freitag</div><div class="headerCell" data-v-0ef07628>Samstag</div><div class="headerCell" data-v-0ef07628>Sonntag</div>',7),T={class:"dayHeader"},F={class:"dayNumber"},z={key:0},N={class:"holidayName"},U={class:"appointments"},B={key:0,class:"popup"},Y={class:"popup-inner"},H=a(()=>e("h2",null,"Daten löschen",-1)),J=a(()=>e("p",null,"Geben sie die ID des zu löschenden Termins ein",-1)),L=a(()=>e("label",{style:{"margin-left":"62px"},for:"name"},"Appointment-ID:",-1)),O=a(()=>e("label",{for:"name"},"Zusätzliche Information:",-1)),$=a(()=>e("button",{class:"btn3",type:"submit"},"Löschen",-1)),j={key:1,class:"popup"},Z={class:"popup-inner"},E=a(()=>e("h2",null,"Daten hinzufügen",-1)),G=a(()=>e("label",{style:{"margin-right":"13px"},for:"duration"},"Termin Dauer:",-1)),K=a(()=>e("option",{value:"30"},"30 Minuten",-1)),W=a(()=>e("option",{value:"45"},"45 Minuten",-1)),q=a(()=>e("option",{value:"60"},"60 Minuten",-1)),Q=[K,W,q],R=a(()=>e("label",{style:{"margin-left":"62px"},for:"name"},"Appointment-ID:",-1)),X=a(()=>e("label",{for:"name"},"Zusätzliche Information:",-1)),x=a(()=>e("button",{class:"btn3",type:"submit"},"Speichern",-1)),ee={data(){return{months:["","Jänner","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],currentYear:2021,currentMonth:1,today:Math.floor(Date.now()/864e5)*864e5,days:[],popupVisible:!1,formData:{Termindauer:"",AppointmendID:"",Infos:""}}},components:{},async mounted(){await this.loadCalendar()},methods:{async loadCalendar(){try{const s=await h.get(`calendar/${this.currentYear}/${this.currentMonth}`);this.days=s.data}catch(s){alert(JSON.stringify(s))}},async changeMonth(s){const t=Math.max(24012,Math.min(25200,this.currentYear*12+(this.currentMonth-1)+s));this.currentYear=Math.floor(t/12),this.currentMonth=t%12+1,await this.loadCalendar()},async deleteForm(){confirm("Sind Sie sicher, dass Sie die Daten löschen möchten?")&&h.delete("/api/data",this.formData).then(s=>{console.log(s.data),this.closePopup()}).catch(s=>{console.log(s)})},showPopup(){this.popupVisible=!0},closePopup(){this.popupVisible=!1},showDeletePopup(){this.popupVisible=!0},closeDeletePopup(){this.popupVisible=!1},submitForm(){h.post("/api/data",this.formData).then(s=>{console.log(s.data),this.closePopup()}).catch(s=>{console.log(s)})}}},te=Object.assign(ee,{__name:"TerminverwaltungView",setup(s){return(t,o)=>(l(),d("div",k,[C,I,e("div",V,[e("div",{class:"headerArrow",onClick:o[0]||(o[0]=n=>t.changeMonth(-1))},"⮜"),e("h3",S,r(t.months[t.currentMonth])+" "+r(t.currentYear),1),e("div",{class:"headerArrow",onClick:o[1]||(o[1]=n=>t.changeMonth(1))},"⮞")]),e("div",A,[P,(l(!0),d(c,null,v(t.days,n=>(l(),d("div",{key:n.timestamp,class:y({dayCell:!0,disabled:n.month!=t.currentMonth,weekend:!n.isWorkingDay,holiday:n.isPublicHoliday,today:n.timestamp==t.today})},[e("div",T,[e("div",F,[w(r(n.day),1),n.month!=t.currentMonth?(l(),d("span",z,"."+r(n.month)+".",1)):m("",!0)]),e("div",N,r(n.schoolHolidayName),1)]),e("div",U,[(l(!0),d(c,null,v(n.appointments,i=>(l(),d("div",{class:"appointment",key:i.guid},r(new Date(i.timestamp).toLocaleString("de-AT",{hour:"2-digit",minute:"2-digit"}))+" "+r(i.patientFirstname)+" "+r(i.patientLastname),1))),128))]),e("button",{class:"btn1",onClick:o[2]||(o[2]=(...i)=>t.showPopup&&t.showPopup(...i))},"Daten hinzufügen"),e("button",{class:"btn2",onClick:o[3]||(o[3]=(...i)=>t.showDeletePopup&&t.showDeletePopup(...i))},"Daten löschen")],2))),128))]),t.popupDelete?(l(),d("div",B,[e("div",Y,[H,e("form",{onSubmit:o[6]||(o[6]=f((...n)=>t.deleteForm&&t.deleteForm(...n),["prevent"]))},[e("div",null,[J,L,p(e("input",{id:"name","onUpdate:modelValue":o[4]||(o[4]=n=>t.formData.AppointmendID=n),type:"text"},null,512),[[u,t.formData.AppointmendID]])]),e("div",null,[O,p(e("input",{id:"name","onUpdate:modelValue":o[5]||(o[5]=n=>t.formData.Infos=n),type:"text"},null,512),[[u,t.formData.Infos]])]),$],32),e("button",{class:"btn4",onClick:o[7]||(o[7]=(...n)=>t.closeDeletePopup&&t.closeDeletePopup(...n))},"Abbrechen")])])):m("",!0),t.popupVisible?(l(),d("div",j,[e("div",Z,[E,e("form",{onSubmit:o[11]||(o[11]=f((...n)=>t.submitForm&&t.submitForm(...n),["prevent"]))},[e("div",null,[G,p(e("select",{"onUpdate:modelValue":o[8]||(o[8]=n=>t.duration=n),id:"duration"},Q,512),[[D,t.duration]])]),e("div",null,[R,p(e("input",{id:"name","onUpdate:modelValue":o[9]||(o[9]=n=>t.formData.AppointmendID=n),type:"text"},null,512),[[u,t.formData.AppointmendID]])]),e("div",null,[X,p(e("input",{id:"name","onUpdate:modelValue":o[10]||(o[10]=n=>t.formData.Infos=n),type:"text"},null,512),[[u,t.formData.Infos]])]),x],32),e("button",{class:"btn4",onClick:o[12]||(o[12]=(...n)=>t.closePopup&&t.closePopup(...n))},"Abbrechen")])])):m("",!0)]))}}),oe=b(te,[["__scopeId","data-v-0ef07628"]]);export{oe as default};
